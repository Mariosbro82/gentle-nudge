import{c as k,u as y,r,j as e,s as b}from"./index-CdJipTJO.js";import{B as c}from"./button-DuQyEyRp.js";import{I as l}from"./input-CYLGLQaJ.js";import{L as t,a as S}from"./label-BVAcjJAR.js";import{T as C}from"./textarea-MzV70CuA.js";import{C as f,a as g,b as u,d as j,c as p}from"./card-CM9SCnqF.js";import"./index-Ckf17XvL.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],V=k("external-link",I);function q(){const{user:a}=y(),[s,d]=r.useState(null),[N,w]=r.useState(!0),[o,m]=r.useState(!1);r.useEffect(()=>{async function n(){if(!a)return;const{data:i}=await b.from("users").select("*").eq("id",a.id).single();d(i||{name:"",email:a.email,id:a.id}),w(!1)}n()},[a]);async function v(n){n.preventDefault(),m(!0);const i=new FormData(n.currentTarget),h={slug:i.get("slug"),name:i.get("name"),job_title:i.get("title"),bio:i.get("bio"),website:i.get("website"),linkedin_url:i.get("linkedin")},{error:x}=await b.from("users").update(h).eq("id",a==null?void 0:a.id);x?alert(x.message):(alert("Profil aktualisiert!"),d({...s,...h})),m(!1)}return N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"h-6 w-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-8 max-w-4xl",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Einstellungen"}),e.jsx("p",{className:"text-zinc-500",children:"Verwalten Sie Ihr Profil und Integrationen."})]}),e.jsx("form",{onSubmit:v,children:e.jsxs(f,{className:"bg-zinc-900/50 border-white/5 mb-8",children:[e.jsxs(g,{children:[e.jsx(u,{children:"Persönliches Profil"}),e.jsx(j,{children:"Diese Daten erscheinen auf Ihrer digitalen Visitenkarte."})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"slug",children:"Username / Handle (für Ihre URL)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{id:"slug",name:"slug",defaultValue:s==null?void 0:s.slug,placeholder:"fabian",className:"bg-black/50 border-white/10"}),(s==null?void 0:s.slug)&&e.jsx(c,{type:"button",variant:"outline",size:"icon",asChild:!0,title:"Profil öffnen",children:e.jsx("a",{href:`/p/${s.slug}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(V,{className:"h-4 w-4"})})})]}),e.jsxs("p",{className:"text-[10px] text-zinc-500",children:["Ihre öffentliche URL: ",e.jsxs("code",{className:"bg-white/10 px-1 rounded",children:["nfc.wear/p/",(s==null?void 0:s.slug)||"..."]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"name",children:"Name"}),e.jsx(l,{id:"name",name:"name",defaultValue:s==null?void 0:s.name,className:"bg-black/50 border-white/10"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"title",children:"Job Title"}),e.jsx(l,{id:"title",name:"title",defaultValue:s==null?void 0:s.job_title,className:"bg-black/50 border-white/10"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"bio",children:"Bio"}),e.jsx(C,{id:"bio",name:"bio",defaultValue:s==null?void 0:s.bio,className:"bg-black/50 border-white/10"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"website",children:"Webseite"}),e.jsx(l,{id:"website",name:"website",defaultValue:s==null?void 0:s.website,className:"bg-black/50 border-white/10"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"linkedin",children:"LinkedIn URL"}),e.jsx(l,{id:"linkedin",name:"linkedin",defaultValue:s==null?void 0:s.linkedin_url,className:"bg-black/50 border-white/10"})]}),e.jsxs(c,{type:"submit",className:"w-fit bg-white text-black hover:bg-zinc-200",disabled:o,children:[o?e.jsx(S,{className:"animate-spin mr-2 h-4 w-4"}):null,"Profil Speichern"]})]})]})}),e.jsxs(f,{className:"bg-zinc-900/50 border-white/5 disabled opacity-60",children:[e.jsxs(g,{children:[e.jsx(u,{children:"Globale Integrationen (Coming Soon)"}),e.jsx(j,{children:"Verbinden Sie Ihre externen Tools."})]}),e.jsx(p,{className:"space-y-6 pointer-events-none",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{className:"text-base",children:"Salesforce CRM"}),e.jsx("p",{className:"text-sm text-zinc-500",children:"Kontakte automatisch mit Salesforce synchronisieren."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-yellow-500"}),e.jsx("span",{className:"text-xs text-zinc-500 uppercase",children:"Ausstehend"}),e.jsx(c,{variant:"outline",size:"sm",className:"ml-2 border-white/10",children:"Verbinden"})]})]})})]})]})}export{q as default};
